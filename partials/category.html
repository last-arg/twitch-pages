<div x-data="category()">
  <div class="flex items-center">
    <h2>
      <a class="flex items-center" :href="`https://www.twitch.tv/directory/games/${name}`">
        <img class="w-10 mr-3" :src="getImageSrc(name, $el.width, $el.height)" width="104" height="144">
        <p x-text="name"></p>
      </a>
    </h2>
    <button class="ml-6" type="button"
      x-text="id && $store.games.hasId(id) ? 'UnFollow' : 'Follow'"
      x-on:click="$store.games.toggle(id, name)"
    >Follow</button>
  </div>
  <ul class="flex flex-wrap">
    <template x-for="video in videos">
      <li x-data="{videosUrl: `/${video.user_login}/videos`}" class="w-1/3">
        <a :href="`https://twitch.tv/${video.user_login}`" :title="video.title">
          <div class="relative">
            <img :src="createLiveUserImageUrl(video.thumbnail_url, 440, 248)" alt="" width="440" height="248" />
            <p class="absolute bottom-0 left-0 bg-trueGray-800 text-trueGray-100 text-sm px-1 rounded-sm mb-1 ml-1" x-text="`${video.viewer_count} viewers`"></p>
          </div>
          <p class="truncate" x-text="video.title">game title</p>
        </a>
        <div class="flex">
          <a :href="videosUrl">
            <img class="w-14" :src="$store.profile_images.imgUrl(video.user_id)" alt="" width="300" height="300">
          </a>
          <div class="flex flex-col justify-between">
            <div>
              <a :href="videosUrl" x-text="video.user_name"
                 x-on:click.prevent="$dispatch('set-main', {path: videosUrl, getUrl: '/partials/user_videos.html'})">
              ></a>

              <button type="button"
                x-on:click="$store.streams.toggle(video)"
                x-text="$store.streams.hasId(video.user_id) ? 'Unfollow' : 'Follow'"
              >Follow</button>
            </div>
            <a :href="`https://www.twitch.tv/${video.user_login}/videos`">
              Twitch videos
            </a>
          </div>
        </div>
      </li>
    </template>
  </ul>
  <div class="text-center">
    <button type="button"
      x-on:click="fetchVideos()"
      class="border-2 py-1 border-violet-600 block w-full hover:bg-violet-600 hover:text-gray-50"
    >Load more videos</button>
  </div>
</div>
